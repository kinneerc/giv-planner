/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'kinneerc' at '11/19/15 5:18 PM' with Gradle 2.9
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/2.9/userguide/tutorial_java_projects.html
 */

apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'eclipse'
apply plugin: 'jdepend'
apply plugin: 'jacoco'


mainClassName = 'edu.allegheny.vanschedule.frontend.AppsScriptApi'
sourceCompatibility = 1.7
targetCompatibility = 1.7
version = '1.0'

repositories {
    mavenCentral()
}

configurations {
    javancss
}

dependencies {
    compile 'com.google.api-client:google-api-client:1.20.0'
    compile 'com.google.oauth-client:google-oauth-client-jetty:1.20.0'
    compile 'com.google.apis:google-api-services-script:v1-rev1-1.20.0'
    testCompile 'junit:junit:4.12'
    javancss 'org.codehaus.javancss:javancss:32.59'
}

test {
    jacoco {
        append = false
        destinationFile = file("$buildDir/jacoco/jacocoTest.exec")
        classDumpFile = file("$buildDir/jacoco/classpathdumps")
    }
}

jacoco {
    applyTo run
}

task applicationCodeCoverageReport(type:JacocoReport){
    executionData run
    sourceSets sourceSets.main
}

jacoco {
    toolVersion =  "0.7.5.201505241946"
    reportsDir = file("$buildDir/reports/jacoco")
}

jacocoTestReport {
    reports {
    xml.enabled false
    csv.enabled false
    html.destination "${buildDir}/jacocoHtml"
    }
}

task javancss << {
    mkdir reportsDir

     ant {
        taskdef name:'javancss', classname:'javancss.JavancssAntTask', classpath:configurations.javancss.asPath
        javancss srcdir:'src', ccnPerFuncMax:javaNCSS_ccnPerFuncMax, abortOnFail:javaNCSS_abortOnFail, generateReport:true, outputfile:"$reportsDir/javancss_metrics.txt", format:'plain'
    }
}
